"use strict";(self.webpackChunklearning=self.webpackChunklearning||[]).push([[568],{6568:(P,u,e)=>{e.r(u),e.d(u,{LoginModule:()=>U,routes:()=>h});var c=e(6814),f=e(593),r=e(6223),o=e(5879),v=e(8297),m=e(1896),b=e(8672),L=e(2939),p=e(3814),d=e(2296),C=e(5195),T=e(617),Z=e(2032),g=e(4170);function x(t,a){1&t&&(o.TgZ(0,"mat-error"),o._uU(1,"Mobile number is required"),o.qZA())}function S(t,a){1&t&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid mobile number"),o.qZA())}function I(t,a){1&t&&(o.TgZ(0,"mat-error"),o._uU(1,"Otp is required"),o.qZA())}function F(t,a){1&t&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid OTP"),o.qZA())}const h=[{path:"",component:(()=>{var t;class a{constructor(i,n,s,A,O,M){this.formBuilder=i,this.authService=n,this.router=s,this.route=A,this.ngxSpinnerService=O,this.snackBar=M}ngOnInit(){this.returnUrl=this.route.snapshot.queryParamMap.returnUrl||"/admin",this.authService.isLoggedIn()&&this.router.navigate([this.returnUrl]),this.loginForm=this.formBuilder.group({mobile:["",r.kI.compose([r.kI.required,r.kI.maxLength(10),r.kI.minLength(10)])],otp:["",r.kI.compose([r.kI.required,r.kI.minLength(4),r.kI.maxLength(4)])],app:!1})}onLoginFormSubmit(i){this.loginForm.valid&&(this.authService.login(this.loginForm.value).subscribe({error:n=>{this.snackBar.open(n,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})},next:n=>{console.log(n),this.snackBar.open(n.message,"x",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate([this.returnUrl])}}),this.ngxSpinnerService.hide())}sentOtp(){const i=this.loginForm.value;this.ngxSpinnerService.show(),this.authService.sendOtp(i.mobile).subscribe({error:n=>{this.snackBar.open(n,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})},next:n=>{this.snackBar.open(n.message,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})}}),this.ngxSpinnerService.hide()}goToHome(){this.router.navigate(["/"])}}return(t=a).\u0275fac=function(i){return new(i||t)(o.Y36(r.QS),o.Y36(v.e),o.Y36(m.F0),o.Y36(m.gz),o.Y36(b.t2),o.Y36(L.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:29,vars:5,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"w-100","vh-100","login-app"],[1,"login"],[1,"text-center"],["src","../../../assets/images/logo.png",1,"login-img",3,"click"],[1,"p-4"],[1,"text-center","mb-4"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100","mt-2"],["matInput","","placeholder","Mobile Number","formControlName","mobile","required",""],[4,"ngIf"],[1,"text-right"],["type","button","mat-raised-button","","color","primary",3,"click"],["appearance","outline",1,"w-100","mt-1"],["matInput","","placeholder","Password","formControlName","otp","required",""],[1,"text-center","mt-2"],["mat-fab","","color","primary",1,"mat-elevation-z6"]],template:function(i,n){1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),o.NdJ("click",function(){return n.goToHome()}),o.qZA()(),o.TgZ(4,"mat-card",4)(5,"h1",5),o._uU(6,"Stock App Login"),o.qZA(),o.TgZ(7,"form",6),o.NdJ("ngSubmit",function(){return n.onLoginFormSubmit(n.loginForm.value)}),o.TgZ(8,"div")(9,"mat-form-field",7)(10,"mat-label"),o._uU(11,"Mobile"),o.qZA(),o._UZ(12,"input",8),o.YNc(13,x,2,0,"mat-error",9),o.YNc(14,S,2,0,"mat-error",9),o.qZA()(),o.TgZ(15,"div",10)(16,"button",11),o.NdJ("click",function(){return n.sentOtp()}),o._uU(17,"Send OTP"),o.qZA()(),o.TgZ(18,"div")(19,"mat-form-field",12)(20,"mat-label"),o._uU(21,"OTP"),o.qZA(),o._UZ(22,"input",13),o.YNc(23,I,2,0,"mat-error",9),o.YNc(24,F,2,0,"mat-error",9),o.qZA()(),o.TgZ(25,"div",14)(26,"button",15)(27,"mat-icon"),o._uU(28,"exit_to_app"),o.qZA()()()()()()()),2&i&&(o.xp6(7),o.Q6J("formGroup",n.loginForm),o.xp6(6),o.Q6J("ngIf",null==n.loginForm.controls.mobile.errors?null:n.loginForm.controls.mobile.errors.required),o.xp6(1),o.Q6J("ngIf",n.loginForm.controls.mobile.hasError("minLength")),o.xp6(9),o.Q6J("ngIf",null==n.loginForm.controls.otp.errors?null:n.loginForm.controls.otp.errors.required),o.xp6(1),o.Q6J("ngIf",n.loginForm.controls.otp.hasError("minlength")))},dependencies:[c.O5,p.xw,p.Wh,d.lW,d.cs,C.a8,T.Hw,Z.Nt,g.KE,g.hX,g.TO,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".vh-100[_ngcontent-%COMP%]{height:100vh}.login-app[_ngcontent-%COMP%]{background:#ffb400;background:linear-gradient(0deg,rgba(255,180,0,.3),rgba(255,180,0,.8)),url(login-bg.f82661b2fdbee16d.jpg);background-size:cover}.login-img[_ngcontent-%COMP%]{cursor:pointer}@media screen and (min-width: 300px){.login[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 700px){.login[_ngcontent-%COMP%]{width:50%}}"]}),a})(),pathMatch:"full"}];let U=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[c.ez,f.m,r.UX,m.Bz.forChild(h)]}),a})()}}]);