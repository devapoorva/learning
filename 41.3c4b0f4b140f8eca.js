"use strict";(self.webpackChunklearning=self.webpackChunklearning||[]).push([[41],{6041:(I,F,s)=>{s.r(F),s.d(F,{FileModule:()=>G,routes:()=>A});var m=s(6814),p=s(1896),C=s(593),a=s(6223),e=s(5879),v=s(9045),d=s(2939),c=s(3814),_=s(3680),r=s(2296),n=s(5195),f=s(2032),h=s(4170),y=s(8525);function q(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File name is required"),e.qZA())}function E(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File name isn't long enough, minimum of 4 characters"),e.qZA())}function N(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File Key is required"),e.qZA())}function b(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File Key isn't long enough, minimum of 4 characters"),e.qZA())}function $(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File Tag is required"),e.qZA())}function K(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File Tag isn't long enough, minimum of 4 characters"),e.qZA())}function S(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File Type is required"),e.qZA())}function J(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File size is required"),e.qZA())}let Y=(()=>{var t;class l{constructor(i,o,g,Z,x){this.formBuilder=i,this.apiService=o,this.activatedRoute=g,this.snackBar=Z,this.router=x,this.form=this.formBuilder.group({fileKey:["",a.kI.compose([a.kI.required,a.kI.minLength(4)])],tag:["",a.kI.compose([a.kI.required,a.kI.minLength(4)])],name:["",a.kI.compose([a.kI.required,a.kI.minLength(4)])],fileType:["",a.kI.compose([a.kI.required])],size:["",a.kI.compose([a.kI.required])]}),this.sub=this.activatedRoute.params.subscribe(T=>{T.id&&(this.id=T.id)})}ngOnInit(){}onSubmit(){this.form.valid&&this.apiService.addFile(this.form.value).subscribe({next:i=>{this.snackBar.open(i.message,"x",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["admin/file/files"])},error:i=>{this.snackBar.open(i,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})}})}}return(t=l).\u0275fac=function(i){return new(i||t)(e.Y36(a.QS),e.Y36(v.s),e.Y36(p.gz),e.Y36(d.ux),e.Y36(p.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-file-create"]],decls:54,vars:10,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","fileKey","required",""],["matInput","","formControlName","tag","required",""],["formControlName","fileType","required",""],["value","VIDEO"],["value","IMAGE"],["value","PDF"],["matInput","","formControlName","size","required",""],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e._uU(4),e.qZA()(),e.TgZ(5,"mat-card-content",1)(6,"form",2),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"File name"),e.qZA(),e._UZ(13,"input",7),e.YNc(14,q,2,0,"mat-error",8),e.YNc(15,E,2,0,"mat-error",8),e.qZA()(),e.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),e._uU(19,"File Key"),e.qZA(),e._UZ(20,"input",9),e.YNc(21,N,2,0,"mat-error",8),e.YNc(22,b,2,0,"mat-error",8),e.qZA()(),e.TgZ(23,"div",5)(24,"mat-form-field",6)(25,"mat-label"),e._uU(26,"File AWS Tag"),e.qZA(),e._UZ(27,"input",10),e.YNc(28,$,2,0,"mat-error",8),e.YNc(29,K,2,0,"mat-error",8),e.qZA()(),e.TgZ(30,"div",5)(31,"mat-form-field",6)(32,"mat-label"),e._uU(33,"File Type"),e.qZA(),e.TgZ(34,"mat-select",11)(35,"mat-option",12)(36,"span"),e._uU(37,"Video"),e.qZA()(),e.TgZ(38,"mat-option",13)(39,"span"),e._uU(40,"Image"),e.qZA()(),e.TgZ(41,"mat-option",14)(42,"span"),e._uU(43,"Pdf"),e.qZA()()(),e.YNc(44,S,2,0,"mat-error",8),e.qZA()(),e.TgZ(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),e._uU(48,"File size"),e.qZA(),e._UZ(49,"input",15),e.YNc(50,J,2,0,"mat-error",8),e.qZA()(),e.TgZ(51,"div",16)(52,"button",17),e._uU(53,"SUBMIT"),e.qZA()()()()()()()()),2&i&&(e.xp6(4),e.hij("",o.id?"Edit":"Add New"," File"),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",null==o.form.controls.name.errors?null:o.form.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",o.form.controls.name.hasError("minlength")),e.xp6(6),e.Q6J("ngIf",null==o.form.controls.fileKey.errors?null:o.form.controls.fileKey.errors.required),e.xp6(1),e.Q6J("ngIf",o.form.controls.fileKey.hasError("minlength")),e.xp6(6),e.Q6J("ngIf",null==o.form.controls.tag.errors?null:o.form.controls.tag.errors.required),e.xp6(1),e.Q6J("ngIf",o.form.controls.tag.hasError("minlength")),e.xp6(15),e.Q6J("ngIf",null==o.form.controls.fileType.errors?null:o.form.controls.fileType.errors.required),e.xp6(6),e.Q6J("ngIf",null==o.form.controls.size.errors?null:o.form.controls.size.errors.required))},dependencies:[m.O5,c.xw,c.yH,_.ey,r.lW,n.a8,n.dn,n.dk,n.n5,f.Nt,h.KE,h.hX,h.TO,y.gD,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),l})();function B(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name is required"),e.qZA())}function L(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Name isn't long enough, minimum of 4 characters"),e.qZA())}function O(t,l){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"File is required"),e.qZA())}let M=(()=>{var t;class l{constructor(i,o,g,Z,x){this.formBuilder=i,this.apiService=o,this.activatedRoute=g,this.snackBar=Z,this.router=x,this.courses=[],this.selectedFile=null,this.form=this.formBuilder.group({name:[null,a.kI.compose([a.kI.required,a.kI.minLength(4)])],file:[null,a.kI.compose([a.kI.required])]}),this.sub=this.activatedRoute.params.subscribe(T=>{T.id&&(this.id=T.id)})}ngOnInit(){}onFileSelected(i){this.selectedFile=i.target.files[0]}onSubmit(){if(this.form.valid){const i=new FormData;i.append("file",this.selectedFile),i.append("name",this.form.value.name),this.apiService.uploadFile(i).subscribe({next:o=>{this.snackBar.open(o.message,"x",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["admin/file/files"])},error:o=>{this.snackBar.open(o,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})}})}}}return(t=l).\u0275fac=function(i){return new(i||t)(e.Y36(a.QS),e.Y36(v.s),e.Y36(p.gz),e.Y36(d.ux),e.Y36(p.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-file-upload"]],decls:26,vars:4,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["type","file","formControlName","file",1,"file-upload",3,"change"],["for","file",1,"md-button","md-raised","md-primary"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e._uU(4," Upload Fil "),e.qZA()(),e.TgZ(5,"mat-card-content",1)(6,"form",2),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Name"),e.qZA(),e._UZ(13,"input",7),e.YNc(14,B,2,0,"mat-error",8),e.YNc(15,L,2,0,"mat-error",8),e.qZA()(),e.TgZ(16,"div",5)(17,"mat-label"),e._uU(18,"File"),e.qZA(),e.TgZ(19,"input",9),e.NdJ("change",function(Z){return o.onFileSelected(Z)}),e.qZA(),e.TgZ(20,"label",10),e._uU(21,"Choose File"),e.qZA(),e.YNc(22,O,2,0,"mat-error",8),e.qZA(),e.TgZ(23,"div",11)(24,"button",12),e._uU(25,"SUBMIT"),e.qZA()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",null==o.form.controls.name.errors?null:o.form.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",o.form.controls.name.hasError("minlength")),e.xp6(7),e.Q6J("ngIf",null==o.form.controls.file.errors?null:o.form.controls.file.errors.required))},dependencies:[m.O5,c.xw,c.yH,r.lW,n.a8,n.dn,n.dk,n.n5,f.Nt,h.KE,h.hX,h.TO,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),l})();var P=s(7509),Q=s(617),z=s(6385),w=s(2596),U=s(6472);function D(t,l){if(1&t&&(e.TgZ(0,"div",13),e._UZ(1,"img",14),e.qZA()),2&t){const u=e.oxw().$implicit;e.xp6(1),e.s9C("src",u.fileAccessUrl,e.LSH)}}function k(t,l){if(1&t&&(e.TgZ(0,"div",7)(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"div",8)(4,"span",9),e._uU(5),e.qZA()(),e.TgZ(6,"div",8),e.YNc(7,D,2,1,"div",10),e.qZA(),e.TgZ(8,"div",8),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"div",0)(12,"button",11)(13,"mat-icon"),e._uU(14,"edit"),e.qZA()(),e.TgZ(15,"button",12)(16,"mat-icon"),e._uU(17,"delete"),e.qZA()()()()()),2&t){const u=l.$implicit,i=e.oxw();e.xp6(2),e.Oqu(u.name),e.xp6(2),e.Q6J("ngClass",i.getFileTypeClass(u.fileType)),e.xp6(1),e.hij(" ",u.fileType,""),e.xp6(2),e.Q6J("ngIf","IMAGE"==u.fileType),e.xp6(2),e.Oqu(u.tagName)}}function R(t,l){if(1&t){const u=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"mat-card",17)(3,"pagination-controls",18),e.NdJ("pageChange",function(o){e.CHM(u);const g=e.oxw();return e.KtG(g.onPageChanged(o))}),e.qZA()()()()}2&t&&(e.xp6(3),e.Q6J("maxSize",100)("autoHide",!0))}const W=function(t,l,u){return{itemsPerPage:t,currentPage:l,totalItems:u}},A=[{path:"create",component:Y,pathMatch:"full"},{path:"upload",component:M,pathMatch:"full"},{path:"files",component:(()=>{var t;class l{constructor(i,o){this.snackBar=i,this.apiService=o,this.files=[],this.page=1,this.count=3,this.total=0}ngOnInit(){this.getFiles()}getFiles(){this.apiService.getFiles(this.page,this.count).subscribe({next:i=>{console.log(i),this.files=i.data.content,this.total=i.data.totalElements},error:i=>{this.snackBar.open(i,"x",{panelClass:"error",verticalPosition:"top",duration:3e3})}})}getFileTypeClass(i){return"IMAGE"==i?"primary-text":"VIEO"==i?"danger-text":"success-text"}onPageChanged(i){this.page=i,this.getFiles(),window.scrollTo(0,0)}}return(t=l).\u0275fac=function(i){return new(i||t)(e.Y36(d.ux),e.Y36(v.s))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-file-files"]],decls:21,vars:9,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[3,"ngClass"],["class","app-image",4,"ngIf"],["mat-mini-fab","","color","primary","matTooltip","Edit"],["mat-mini-fab","","color","warn","matTooltip","Delete","disabled","",1,"mx-1"],[1,"app-image"],[3,"src"],["fxLayout","row wrap"],["fxFlex","100"],[1,"text-center"],["previousLabel","Previous","nextLabel","Next",1,"product-pagination",3,"maxSize","autoHide","pageChange"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4,"File List"),e.qZA()(),e._UZ(5,"mat-divider"),e.TgZ(6,"div",2)(7,"div",3)(8,"div",4),e._uU(9,"File Name"),e.qZA(),e.TgZ(10,"div",4),e._uU(11,"File Type"),e.qZA(),e.TgZ(12,"div",4),e._uU(13,"File"),e.qZA(),e.TgZ(14,"div",4),e._uU(15,"AWS tag"),e.qZA(),e.TgZ(16,"div",4),e._uU(17,"Action"),e.qZA()(),e.YNc(18,k,18,5,"div",5),e.ALo(19,"paginate"),e.qZA()(),e.YNc(20,R,4,2,"div",6),e.qZA()),2&i&&(e.xp6(18),e.Q6J("ngForOf",e.xi3(19,2,o.files,e.kEZ(5,W,o.count,o.page,o.total))),e.xp6(2),e.Q6J("ngIf",o.files.length>0))},dependencies:[m.mk,m.sg,m.O5,c.xw,c.Wh,c.yH,P.oO,r.nh,n.a8,Q.Hw,z.d,w.gM,U.LS,U._s]}),l})(),pathMatch:"full"}];let G=(()=>{var t;class l{}return(t=l).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,C.m,p.Bz.forChild(A),a.UX,U.JX]}),l})()},9045:(I,F,s)=>{s.d(F,{s:()=>v});var m=s(553),p=s(6306),C=s(8504),a=s(5879),e=s(9862);let v=(()=>{var d;class c{constructor(r){this.http=r}getToken(){return"Bearer "+localStorage.getItem("token")}getFiles(r,n){return console.log("headers "+this.header),this.http.get(`${m.N.baseUrl}/api/v1/admin/file?page=${r}&size=${n}`).pipe((0,p.K)(this.handleError))}getFilesByTypes(r){return this.http.get(`${m.N.baseUrl}/api/v1/admin/file?fileType=${r}`).pipe((0,p.K)(this.handleError))}getCourses(r,n){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course?page=${r}&size=${n}`).pipe((0,p.K)(this.handleError))}deleteCourse(r){return this.http.delete(`${m.N.baseUrl}/api/v1/admin/course/${r}`).pipe((0,p.K)(this.handleError))}getAllCourses(){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course/all`).pipe((0,p.K)(this.handleError))}getCoursePackages(r,n){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course-plan?page=${r}&size=${n}`).pipe((0,p.K)(this.handleError))}getCourseTopicByCourse(r){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course-topic?courseId=${r}`).pipe((0,p.K)(this.handleError))}getCoursesTopics(r,n){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course-topic?page=${r}&size=${n}`).pipe((0,p.K)(this.handleError))}deleteCourseTopicDelete(r){return this.http.delete(`${m.N.baseUrl}/api/v1/admin/course-topic/${r}`).pipe((0,p.K)(this.handleError))}getUsersByRole(r,n,f){return this.http.get(`${m.N.baseUrl}/api/v1/admin/users?page=${r}&size=${n}&type=${f}`).pipe((0,p.K)(this.handleError))}getOnBoards(r,n,f){return this.http.get(`${m.N.baseUrl}/api/v1/admin/app-intro?page=${r}&size=${n}&type=${f}`).pipe((0,p.K)(this.handleError))}getSliders(r,n,f){return this.http.get(`${m.N.baseUrl}/api/v1/admin/app-slider?page=${r}&size=${n}&type=${f}`).pipe((0,p.K)(this.handleError))}getCoursesTopicVideos(r,n){return this.http.get(`${m.N.baseUrl}/api/v1/admin/course-video?page=${r}&size=${n}`).pipe((0,p.K)(this.handleError))}deleteCoursesTopicVideo(r){return this.http.delete(`${m.N.baseUrl}/api/v1/admin/course-video/${r}`).pipe((0,p.K)(this.handleError))}addTopic(r){return this.http.post(`${m.N.baseUrl}/api/v1/admin/course-topic`,r).pipe((0,p.K)(this.handleError))}addVideo(r){return this.http.post(`${m.N.baseUrl}/api/v1/admin/course-video`,r).pipe((0,p.K)(this.handleError))}addCourse(r){return this.http.post(`${m.N.baseUrl}/api/v1/admin/course`,r).pipe((0,p.K)(this.handleError))}addFile(r){return this.http.post(`${m.N.baseUrl}/api/v1/admin/file/create`,r).pipe((0,p.K)(this.handleError))}uploadFile(r){return this.http.post(`${m.N.baseUrl}/api/v1/admin/file`,r).pipe((0,p.K)(this.handleError))}handleError(r){let n="";return console.log("error:"+r),n=r.error instanceof ErrorEvent?`An error occurred: ${r.message}`:`${r.error.message}`,console.log(n),(0,C._)(()=>n)}}return(d=c).\u0275fac=function(r){return new(r||d)(a.LFG(e.eN))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),c})()}}]);